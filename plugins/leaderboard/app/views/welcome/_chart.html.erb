<%- prev_year_profitability = SoldEntry.for_year(Date.current.prev_year.year).sum(:amount).round(2) %>
<%- current_year_profitability = SoldEntry.for_year(Date.current.year).sum(:amount).round(2) %>

<h3>Yearly income</h3>

<canvas id="incomeChart" width="400" height="400"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script>
  let ctx = document.getElementById('incomeChart').getContext('2d');
  let incomeChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: ['2024', '2025'],
          datasets: [{
              label: 'Income in EUR',
              data: [<%= prev_year_profitability %>, <%= current_year_profitability %>],
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
              ],
              borderColor: [
                  'rgba(255, 99, 132, 1)',
                  'rgba(54, 162, 235, 1)',
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });
</script>
